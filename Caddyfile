:$PORT
root * /usr/share/caddy
file_server

header {
    X-Robots-Tag none
    X-Content-Type-Options nosniff
    X-Frame-Options DENY
    Referrer-Policy no-referrer-when-downgrade
}

basicauth /$UUID/* {
    $UUID $MYUUID-HASH
}

@websocket_xray_vmess {
header Connection *Upgrade*
header Upgrade    websocket
path /$UUID-vmess
}
reverse_proxy @websocket_xray_vmess unix//etc/caddy/vmess

@websocket_xray_vless {
header Connection *Upgrade*
header Upgrade    websocket
path /$UUID-vless
}
reverse_proxy @websocket_xray_vless unix//etc/caddy/vless

@websocket_xray_trojan {
header Connection *Upgrade*
header Upgrade    websocket
path /$UUID-trojan
}
reverse_proxy @websocket_xray_trojan unix//etc/caddy/trojan
